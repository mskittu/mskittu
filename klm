#!/bin/bash

# Current date
CURRENT_DATE=$(date +%Y%m%d)

# Current year & month
CURR_YEAR=$(date +%Y)
CURR_MONTH=$(date +%m)

# 2nd day of current month
SECOND_DAY="${CURR_YEAR}${CURR_MONTH}02"

# Last day of previous month
LAST_PREV_MONTH=$(date -d "$(date +%Y-%m-01) -1 day" +%Y%m%d)

# 5th of current month
FIFTH_DAY="${CURR_YEAR}${CURR_MONTH}05"

# Condition
if [ "$CURRENT_DATE" -le "$SECOND_DAY" ]; then
    DATE_FILTER="$LAST_PREV_MONTH"
else
    DATE_FILTER="$FIFTH_DAY"
fi

echo "CURRENT_DATE   = $CURRENT_DATE"
echo "DATE_FILTER    = $DATE_FILTER"
