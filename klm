#!/bin/bash

output_file="final_report.csv"
input_files=$(ls address*.csv 2>/dev/null)  # Get list of matching CSV files, suppress errors

# Check if files exist
if [ -z "$input_files" ]; then
    echo "Error: No CSV files matching 'address*.csv' found!"
    exit 1
fi

# Get header from the first file
first_file=$(echo $input_files | awk '{print $1}')  # Pick first file from the list
head -n 1 "$first_file" > "$output_file"

# Append all data, skipping headers
for file in $input_files; do
    tail -n +2 "$file" >> "$output_file"
done

echo "Merged CSV files into $output_file"
